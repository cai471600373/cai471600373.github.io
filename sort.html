<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>排序——聆听·彼岸</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>

</style>
</head>
<body>
<textarea id="c1" rows="20" cols="100">1. context; 2.persistent; devoted; talented; critical; responsible; determined; hard-working; diligent; 3. Postgraduate 4.theory of evolution 5.pursue further study 6.intensive 7.impress 8.feedback 9.attendance 10.language points 11.dictation 12.address 13.pig 14.drive 15.snoring 16.cloze </textarea><br>
<button onclick="sort()">排序</button><br>
<textarea id="c2" rows="20" cols="100">[A篇：5.丰盛的午餐; 6.西湖，处于杭州西部，是杭州的一大亮点.7.private vehicle 9.离开之前 10.背包旅行
[B篇：11.我为失去的机会感到伤心难过。12.我最敬重的老师，充满了爱与同情心。
[C篇：13.假装做某事 14. luster=pleasure 
[D篇：15.available to 16.有可能做某事
[七选五：17.有潜力的员工18.stand out 19.引起兴趣20.respond to
[完型：21. pay off 22.与…保持联系 23.occasionally 24.option 
[语法： 25.不是所有会发光的东西都是金子26.compare的名词 27.self-esteem 28.true的名词与副词 
 </textarea><br>
分栏行数: <input id="t2"><button onclick="sort2()">排序</button><br>
<div id="view"></div>
<script>
function isChinese(temp) 
{ 
if(escape(temp).indexOf("%u")<0)return false;
return true;
}
var sort = () => {
    var str=document.getElementById("c1").value;
	var n=str.match(/(?<=\d+\.)[\D]*(?!\D)/g);
    document.getElementById("view").innerHTML="";
	for(var i=0;i<n.length;i++){
		console.log(document.getElementById("view").innerHTML+="<br>"+(i+1)+"."+n[i])
	}};
var sort2 = () => {
    var view = document.getElementById("view");
    view.innerHTML="";
    var str=document.getElementById("c2").value;
    var num = parseInt(document.getElementById("t2").value);
    var name = str.match(/(?<=\[).*?：/g)
    var parts = str.split(/\[.*?：/g).filter(function(e){if(e!="")return e});
    var list = [];
    var plist = [];
    var count=0;
    var countt=1;
    for(var i=0;i<300;i++){list.push("");plist.push("");}
    for(var i=0;i<name.length;i++){
        list[count]=name[i];
        plist[count]=""; 
        count++;
        var each = parts[i].match(/(?<=\d+\.)[\D]*(?!\D)/g);
        for(let e of each){
            if (isChinese(e)){
                list[count]=countt+"."+"【空】";
                plist[count]=e; 
                count++;
                countt++;
                continue;
            };
            list[count]=countt+"."+e;
            plist[count]="【空】"; 
            count++;
            countt++;
        }
    }
    console.log(list);
    console.log(plist);
    for(var i=0;i<list.length;i++){
        if(list[i]=="")list.splice(i);
    }
    var pd=true;
    for(var i=0;i<list.length;i++){
        if(pd){
            view.innerHTML+="<br>"+list[i];
            if((i+1)%num==0)pd=false;
            continue;
        }
        view.innerHTML+="<br>"+plist[i];
        if((i+1)%num==0)pd=true;
    }
    //document.getElementById("view").innerHTML="";
	//for(var i=0;i<n.length;i++){
		//console.log(document.getElementById("view").innerHTML+="<br>"+(i+1)+"."+n[i])
	//}};
    //str.split(/\[.*?：/g)
    };
</script>
</body>
</html>